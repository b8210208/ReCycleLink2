<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ReCycleLink â€” Community Recycling & Eldercare</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <header>
    <h1>ReCycleLink</h1>
    <p class="tag" data-i="slogan">Your Recycling, Their Purpose.</p>
    <div class="lang-switch">
      <button id="langEN">EN</button>
      <button id="langZH">ä¸­</button>
    </div>
  </header>

  <section id="auth">
    <h2 data-i="loginTitle">Login / è§’è‰²ç™»å…¥</h2>
    <div class="row">
      <label>
        <span data-i="role">Role / èº«ä»½ï¼š</span>
        <select id="role">
          <option value="resident" data-i="resident">Resident / ä½æˆ¶</option>
          <option value="retiree" data-i="retiree">Retiree / é•·è€…æ”¶é‹è€…</option>
        </select>
      </label>
      <label>
        <span data-i="name">Name / åç¨±ï¼š</span>
        <input id="name" placeholder="e.g., Ms. Chen" />
      </label>
      <button id="loginBtn" data-i="enter">Enter / é€²å…¥</button>
    </div>
  </section>

  <nav id="tabs" class="hidden">
    <button data-tab="post" data-i="post">Post Pickup / ç™»è¨˜å›æ”¶</button>
    <button data-tab="nearby" class="active" data-i="nearby">Nearby Tasks / é™„è¿‘ä»»å‹™</button>
    <button data-tab="map" data-i="map">Map / åœ°åœ–</button>
    <button data-tab="my" data-i="my">My Tasks / æˆ‘çš„ä»»å‹™</button>
    <button data-tab="impact" data-i="impact">Impact / ç©åˆ†å½±éŸ¿</button>
  </nav>

  <main>
    <section id="post" class="tab hidden">
      <h2 data-i="postTitle">Post a Pickup / ç™»è¨˜å›æ”¶</h2>
      <div class="row">
        <label data-i="type">Type / é¡åˆ¥
          <select id="type">
            <option>Paper</option>
            <option>Plastic</option>
            <option>Metal</option>
            <option>Glass</option>
            <option>E-waste</option>
          </select>
        </label>
        <label data-i="weight">Weight (kg) / é‡é‡
          <input id="weight" type="number" min="0" step="0.1" />
        </label>
      </div>
      <div class="row">
        <label data-i="address">Address / åœ°å€
          <input id="address" placeholder="JJHS, Kaohsiung" />
          <button type="button" id="voiceAddressBtn">ğŸ¤ Voice Input / èªéŸ³è¼¸å…¥</button>
        </label>
      </div>
      <div class="row">
        <label>Lat / ç·¯åº¦<input id="lat" type="number" step="0.000001" /></label>
        <label>Lng / ç¶“åº¦<input id="lng" type="number" step="0.000001" /></label>
        <button id="geoBtn" type="button" data-i="geoloc">Use my GPS / ç”¨æˆ‘çš„å®šä½</button>
      </div>
      <div class="row">
        <label data-i="time">Preferred time / å–ä»¶æ™‚é–“<input id="time" type="datetime-local" /></label>
        <label data-i="tip">Tip (optional) / å°è²»
          <input id="tip" type="number" min="0" step="10" />
        </label>
      </div>
      <button id="postBtn" data-i="submit">Submit / é€å‡º</button>
      <p class="hint" data-i="demo">* Demo only. Data is saved to your browser (localStorage). / åƒ…ç¤ºç¯„ç”¨ï¼Œè³‡æ–™å­˜æ–¼ç€è¦½å™¨ã€‚</p>
    </section>

    <section id="nearby" class="tab">
      <div class="row">
        <label>Your Lat<input id="meLat" type="number" step="0.000001" /></label>
        <label>Your Lng<input id="meLng" type="number" step="0.000001" /></label>
        <button id="useSampleLoc" type="button">Use School / ç”¨å­¸æ ¡åº§æ¨™</button>
        <button id="refreshNearby" type="button">Refresh / é‡æ–°æ•´ç†</button>
        <button id="exportCSV" type="button">Export CSV</button>
      </div>
      <ul id="nearbyList"></ul>
    </section>

    <section id="map" class="tab hidden">
      <div id="mapArea"></div>
    </section>

    <section id="my" class="tab hidden">
      <ul id="myList"></ul>
    </section>

    <section id="impact" class="tab hidden">
      <h2>Eco-Points / ç©åˆ†</h2>
      <p>Total points: <strong id="points">0</strong></p>
      <p>Rulesï¼š1 kg = 10 ptsï¼›å®Œæˆä»»å‹™ +20 ptsï¼›å°è²»ç‚ºç¤ºæ„ã€‚</p>
      <div id="activity"></div>
    </section>
  </main>

  <footer>
    <small>&copy; 2025 ReCycleLink â€” SDG 11 & 12 (Class Prototype)</small>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
  <script>
    // Check for Speech Recognition API
    if ('webkitSpeechRecognition' in window) {
      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'en-US';
      recognition.continuous = false;
      recognition.interimResults = false;

      // Start recognition when button is clicked
      document.getElementById('voiceAddressBtn').addEventListener('click', function() {
        recognition.start();
      });

      // Capture the spoken words
      recognition.onresult = function(event) {
        const speechToText = event.results[0][0].transcript;
        document.getElementById('address').value = speechToText;
      };

      recognition.onerror = function(event) {
        alert('Error occurred in recognition: ' + event.error);
      };
    } else {
      alert("Your browser does not support speech recognition.");
    }
  </script>
</body>
</html>
